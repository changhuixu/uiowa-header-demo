<div
  class="uiowa-bar py-1 px-2"
  role="region"
  aria-label="University of Iowa global header"
>
  <div class="d-flex navbar navbar-expand p-0">
    <div class="">
      <a
        href="https://uiowa.edu/"
        title="The University of Iowa"
        class="wordmark-link"
        target="_blank"
        rel="noopener"
      >
        <svg
          version="1.1"
          aria-label="University of Iowa"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          width="100%"
          height="100%"
          viewBox="0 0 611 195"
          xml:space="preserve"
        >
          <title>University of Iowa</title>
          <g>
            <path
              d="M98.5,44.6H85v97.3h13.5v35.3H24.1v-35.3h13.5V44.6H24.1v-35h74.4V44.6z"
            />
            <path
              d="M198.5,177.2h-53.9c-19.6,0-32.4-12.8-32.4-33.8v-100c0-20.8,13-33.8,32.4-33.8h53.9c19.6,0,32.4,13,32.4,33.8v100
        C230.9,164.2,217.8,177.2,198.5,177.2z M183.3,141.9V44.6h-23.4v97.3H183.3z"
            />
            <path
              d="M252,44.6h-11.8v-35h70.5v35h-13.3l12.1,80.7L334.6,9.6h35.8l26.8,115.7l9.7-80.7h-12.3v-35h69.6v35h-11.6l-21,132.6h-56.8
        l-22-98.8l-22.5,98.8h-54.6L252,44.6z"
            />
            <path
              d="M451.8,141.9h12.8L490,9.5h76l25.1,132.4H603v35.3h-56.8l-5.3-40.8h-28.3l-5.1,40.8h-55.8L451.8,141.9L451.8,141.9z
        M538,105.7l-10.9-67.6L516,105.7H538z"
            />
          </g>
        </svg>
      </a>
    </div>
    <div class="mx-auto">
      <span
        *ngIf="showTestWarning"
        class="d-none d-xl-block font-weight-bold p-1"
        style="color: #ce0000; background-color: #ffff00;"
      >
        WARNING: THIS IS A TEST SYSTEM. NOT PRODUCTION!
      </span>
    </div>
    <div class="">
      <div #otherContent>
        <ng-content></ng-content>
      </div>
      <ul class="navbar-nav pt-2" *ngIf="otherContent.children.length==0">
        <li
          class="nav-item text-white mr-4 d-none d-md-flex"
          *ngFor="let item of externalLinks"
        >
          <a
            href="{{item.url}}"
            class="external-link"
            target="{{item.target}}"
            rel="noopener"
            >{{item.text}}</a
          >
        </li>
        <li class="nav-item dropdown ml-3" *ngIf="user && user.userName">
          <div ngbDropdown role="menu">
            <button
              class="btn btn-link user-button p-0"
              id="dropdownBasic1"
              ngbDropdownToggle
            >
              <svg
                aria-hidden="true"
                role="icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 448 512"
                style="height: 0.8rem; width: 1rem; vertical-align: baseline;"
              >
                <path
                  fill="currentColor"
                  d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"
                ></path>
              </svg>
              <span class="user-name"
                >{{user.userName}}
                <span
                  *ngIf="user.originalUserName"
                  class="text-danger font-weight-bold"
                  >({{user.originalUserName}})</span
                >
              </span>
            </button>
            <div
              ngbDropdownMenu
              aria-labelledby="dropdownBasic1"
              role="menuitem"
              class="logout-dropdown dropdown-menu-right"
            >
              <a
                *ngIf="user.originalUserName && showStopImpersonation"
                href="javascript:void(0)"
                (click)="stopImpersonation.emit()"
                style="white-space: nowrap;"
              >
                <svg
                  aria-hidden="true"
                  role="icon"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  style="height: 1rem; width: 1rem;"
                >
                  <path
                    fill="currentColor"
                    d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"
                  ></path>
                </svg>
                <span style="vertical-align: middle;"> Stop Impersonation</span>
              </a>
              <div
                *ngIf="user.originalUserName && showStopImpersonation"
                class="dropdown-divider"
              ></div>
              <a href="javascript:void(0)" (click)="logout()">
                <svg
                  aria-hidden="true"
                  role="icon"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 512 512"
                  style="height: 1rem; width: 1rem;"
                >
                  <path
                    fill="currentColor"
                    d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"
                  ></path>
                </svg>
                <span style="vertical-align: middle;"> Logout</span>
              </a>
            </div>
          </div>
        </li>
        <li class="nav-item ml-3" *ngIf="!user || !user.userName">
          <button
            class="btn btn-link user-button py-0"
            id="dropdownBasic1"
            role="button"
            (click)="login()"
          >
            Login
          </button>
        </li>
      </ul>
    </div>
  </div>
</div>
