@if( user?.userName){
<button
  aria-label="Click to show menu"
  class="iowa-user-button has-dropdown"
  id="username-dropdown"
  (click)="showMenu = !showMenu"
  (clickOutside)="showMenu = false"
  [attr.aria-expanded]="showMenu"
>
  <svg
    aria-hidden="true"
    role="icon"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 448 512"
    style="height: 0.8rem; width: 1rem; vertical-align: baseline"
  >
    <path
      fill="currentColor"
      d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"
    ></path>
  </svg>
  <span class="iowa-user-name ml-1">
    {{ user!.userName }}
    @if(user!.originalUserName){
    <span class="iowa-original-username"> ({{ user!.originalUserName }}) </span>
    }
  </span>
</button>
<div
  aria-labelledby="username-dropdown"
  role="menuitem"
  class="iowa-username-dropdown iowa-user-dropdown-menu-right"
  [ngClass]="{ show: showMenu }"
>
  @if(user!.originalUserName){
  <button
    type="button"
    class="iowa-username-dropdown-button"
    (click)="stopImpersonation.emit(); showMenu = false"
  >
    <svg
      aria-hidden="true"
      role="icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 512 512"
      style="height: 1rem; width: 1rem"
    >
      <path
        fill="currentColor"
        d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"
      ></path>
    </svg>
    <span class="ml-1">Stop Impersonation</span>
  </button>
  <div class="dropdown-divider"></div>
  }
  <button
    type="button"
    class="iowa-username-dropdown-button"
    (click)="logout()"
  >
    <svg
      aria-hidden="true"
      role="icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 512 512"
      style="height: 1rem; width: 1rem"
    >
      <path
        fill="currentColor"
        d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"
      ></path>
    </svg>
    <span class="ml-1">Logout</span>
  </button>
</div>
}@else {
<button
  aria-label="Click to login"
  class="iowa-user-button"
  id="username-dropdown"
  (click)="login()"
>
  <svg
    aria-hidden="true"
    role="icon"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 448 512"
    style="height: 0.8rem; width: 1rem; vertical-align: baseline"
  >
    <path
      fill="currentColor"
      d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"
    ></path>
  </svg>
  <span class="ml-1">Login</span>
</button>
}
